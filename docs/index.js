(()=>{var t={131:()=>{var t=document.getElementById("score"),e=document.getElementById("progressFill"),n=document.getElementById("task"),o=document.getElementById("restartBtn"),i=document.getElementById("modal"),c=document.getElementById("modalTitle"),l=document.getElementById("modalText"),r=document.getElementById("modalRestart"),d=document.getElementById("modalClose"),a=document.getElementById("stage"),s=Array.from(document.querySelectorAll(".A_Item")),u=Array.from(document.querySelectorAll(".C_Bin")),f=0,m=3,g=[{x:46,y:8},{x:62,y:14},{x:72,y:24},{x:36,y:22},{x:30,y:10},{x:56,y:26}];function y(){for(var t=1;t<=3;t++)document.getElementById("life".concat(t)).classList.toggle("is-on",t<=m)}function v(){t.textContent=String(f);var n,o=f/5*100;e.style.width="".concat((n=o,Math.max(0,Math.min(100,n))),"%")}function p(t){a.classList.add("is-locked"),i.hidden=!1,"win"===t?(c.textContent="Победа!",l.textContent="Ты правильно отсортировала 5 предметов."):(c.textContent="Игра окончена",l.textContent="Жизни закончились. Попробуем ещё раз?"),requestAnimationFrame(function(){null==r||r.focus()})}function x(){i.hidden=!0,a.classList.remove("is-locked")}function E(){f=0,m=3,y(),v(),n.textContent="Собери 5 правильных предметов",x(),s.forEach(function(t,e){t.classList.remove("is-done","is-dragging"),t.style.left="".concat(g[e].x,"vw"),t.style.top="".concat(g[e].y,"vw"),t.dataset.done="0"})}function h(t,e){return u.find(function(n){var o=n.getBoundingClientRect();return t>=o.left&&t<=o.right&&e>=o.top&&e<=o.bottom})}function B(t){u.forEach(function(t){return t.classList.remove("is-hover")}),t&&t.classList.add("is-hover")}s.forEach(function(t,e){t.style.left="".concat(g[e].x,"vw"),t.style.top="".concat(g[e].y,"vw");var n=null,o=0,c=0,l=0,r=0;function d(e){if(null!==n){t.releasePointerCapture(n),n=null,t.classList.remove("is-dragging");var o=h(e.clientX,e.clientY);B(null),o&&(function(t,e){return!!e&&e.dataset.accept===t.dataset.type}(t,o)?(function(t,e){var n=e.getBoundingClientRect(),o=a.getBoundingClientRect(),i=n.left-o.left+n.width/2,c=n.top-o.top+.15*n.height,l=i-t.offsetWidth/2,r=c-t.offsetHeight/2;t.style.left="".concat(l,"px"),t.style.top="".concat(r,"px")}(t,o),function(t){t.classList.add("is-done"),t.dataset.done="1",f+=1,v(),f>=5&&p("win")}(t)):(m-=1,y(),m<=0&&p("lose")))}}t.addEventListener("pointerdown",function(e){if("1"!==t.dataset.done&&i.hidden){n=e.pointerId,t.setPointerCapture(n);var d=t.getBoundingClientRect();o=e.clientX,c=e.clientY,l=d.left,r=d.top,t.classList.add("is-dragging")}}),t.addEventListener("pointermove",function(e){if(null!==n){var i=e.clientX-o,d=e.clientY-c,s=l+i,u=r+d,f=a.getBoundingClientRect(),m=s-f.left,g=u-f.top;t.style.left="".concat(m,"px"),t.style.top="".concat(g,"px"),B(h(e.clientX,e.clientY))}}),t.addEventListener("pointerup",d),t.addEventListener("pointercancel",d)}),o.addEventListener("click",E),r.addEventListener("click",E),d.addEventListener("click",x),i.addEventListener("click",function(t){t.target===i&&x()}),E()}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var c=e[o]={exports:{}};return t[o](c,c.exports,n),c.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";n(131)})()})();